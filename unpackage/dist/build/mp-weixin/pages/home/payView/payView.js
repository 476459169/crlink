(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/payView/payView"],{2188:function(e,t,o){"use strict";var n=o("825f"),a=o.n(n);a.a},"23b4":function(e,t,o){"use strict";o.r(t);var n=o("900b"),a=o("2e36");for(var c in a)"default"!==c&&function(e){o.d(t,e,(function(){return a[e]}))}(c);o("2188");var i,l=o("f0c5"),r=Object(l["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);t["default"]=r.exports},"2e36":function(e,t,o){"use strict";o.r(t);var n=o("8ef7"),a=o.n(n);for(var c in n)"default"!==c&&function(e){o.d(t,e,(function(){return n[e]}))}(c);t["default"]=a.a},"825f":function(e,t,o){},"8ef7":function(e,t,o){"use strict";(function(e){var o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{collegeId:"",courseId:"",myData:Object,baseUrl:"http://39.105.48.243:8080/crlink/"}},onLoad:function(e){o=this,this.baseUrl=getApp().globalData.baseUrl,o.collegeId=e.collegeId,o.courseId=e.courseId,o.collegeId&&o.getCollegeMes(),o.courseId&&o.getCourseMes()},methods:{getCollegeMes:function(){var t=e.getStorageSync("loginKey");this.$api.post("college!ajaxGetCollegeDetailNew.action",{collegeId:o.collegeId,loginKey:t}).then((function(t){0==t.res.status?o.myData=t.inf:e.showToast({title:t.res.error})}))},getCourseMes:function(){var t=e.getStorageSync("loginKey");this.$api.post("index!ajaxGetCourseDetailNew.action",{id:o.courseId,loginKey:t}).then((function(t){0==t.res.status?o.myData=t.inf:e.showToast({title:t.res.error})}))},topay:function(){e.login({provider:"weixin",success:function(t){console.log("loginRes="+t.code);var n=t.code;e.request({url:"http://39.105.48.243:8080/crlink/pay/wxPay!ajaxGetOpenId.action",data:{code:n},success:function(t){console.log("openid = "+t.data.inf.openid);var n=t.data.inf.openid;if(0==t.data.res.status)if(o.courseId){var a=e.getStorageSync("loginKey");e.request({url:"http://39.105.48.243:8080/crlink/pay/wxPay!ajaxBuyCourse.action",data:{id:o.courseId?o.courseId:o.collegeId,loginKey:a,tradeType:"JSAPI",openId:n},success:function(e){console.log("ajaxBuyCourse"+e.data),o.wxpay(e.data.inf)}})}else{console.log("kecheng");a=e.getStorageSync("loginKey");e.request({url:"http://39.105.48.243:8080/crlink/pay/wxPay!ajaxBuyCourseCollege.action",data:{id:o.courseId?o.courseId:o.collegeId,loginKey:a,tradeType:"JSAPI",openId:n},success:function(e){o.wxpay(e.data.inf)}})}}})}})},wxpay:function(t){console.log("dict timestamp= "+t.timeStamp),e.requestPayment({provider:"wxpay",timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign,success:function(t){console.log("success:000"+JSON.stringify(t)),e.showToast({title:"购买成功",duration:1e3,complete:function(){e.navigateBack({delta:1})}})},fail:function(e){console.log("fail:"+JSON.stringify(e))}})}},computed:{title:function(){return o.collegeId?o.myData.collegeName:o.myData.title},price:function(){return o.collegeId?o.myData.collegeFee:o.myData.buyPrice}}};t.default=n}).call(this,o("543d")["default"])},"900b":function(e,t,o){"use strict";var n,a=function(){var e=this,t=e.$createElement;e._self._c},c=[];o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return c})),o.d(t,"a",(function(){return n}))},be5f:function(e,t,o){"use strict";(function(e){o("f645");n(o("66fd"));var t=n(o("23b4"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])}},[["be5f","common/runtime","common/vendor"]]]);